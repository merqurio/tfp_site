function RadarChart(t,e,a){function r(t,e){t.each(function(){for(var t,a=d3.select(this),r=a.text().split(/\s+/).reverse(),n=[],l=0,i=1.4,s=a.attr("y"),o=a.attr("x"),d=parseFloat(a.attr("dy")),c=a.text(null).append("tspan").attr("x",o).attr("y",s).attr("dy",d+"em");t=r.pop();)n.push(t),c.text(n.join(" ")),c.node().getComputedTextLength()>e&&(n.pop(),c.text(n.join(" ")),n=[t],c=a.append("tspan").attr("x",o).attr("y",s).attr("dy",++l*i+d+"em").text(t))})}var n={w:600,h:600,margin:{top:20,right:20,bottom:20,left:20},levels:3,maxValue:0,labelFactor:1.25,wrapWidth:60,opacityArea:.35,dotRadius:4,opacityCircles:.1,strokeWidth:2,roundStrokes:!1,color:d3.scale.category10()};if("undefined"!=typeof a)for(var l in a)"undefined"!=typeof a[l]&&(n[l]=a[l]);var i=Math.max(n.maxValue,d3.max(e,function(t){return d3.max(t.map(function(t){return t.value}))})),s=e[0].map(function(t,e){return t.axis}),o=s.length,d=Math.min(n.w/2,n.h/2),c=d3.format("%"),u=2*Math.PI/o,p=d3.scale.linear().range([0,d]).domain([0,i]);d3.select(t).select("svg").remove();var f=d3.select(t).append("svg").attr("width",n.w+n.margin.left+n.margin.right).attr("height",n.h+n.margin.top+n.margin.bottom).attr("class","radar"+t),h=f.append("g").attr("transform","translate("+(n.w/2+n.margin.left)+","+(n.h/2+n.margin.top)+")"),y=h.append("defs").append("filter").attr("id","glow"),v=(y.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),y.append("feMerge")),m=(v.append("feMergeNode").attr("in","coloredBlur"),v.append("feMergeNode").attr("in","SourceGraphic"),h.append("g").attr("class","axisWrapper"));m.selectAll(".levels").data(d3.range(1,n.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("r",function(t,e){return d/n.levels*t}).style("fill","#CDCDCD").style("stroke","#CDCDCD").style("fill-opacity",n.opacityCircles).style("filter","url(#glow)"),m.selectAll(".axisLabel").data(d3.range(1,n.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(t){return-t*d/n.levels}).attr("dy","0.4em").style("font-size","1.5vh").attr("fill","#737373").text(function(t,e){return c(i*t/n.levels)});var x=m.selectAll(".axis").data(s).enter().append("g").attr("class","axis");x.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return p(1.1*i)*Math.cos(u*e-Math.PI/2)}).attr("y2",function(t,e){return p(1.1*i)*Math.sin(u*e-Math.PI/2)}).attr("class","line").style("stroke","white").style("stroke-width","2px"),x.append("text").attr("class","legend").style("font-size","2.5vh").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(t,e){return p(i*n.labelFactor)*Math.cos(u*e-Math.PI/2)}).attr("y",function(t,e){return p(i*n.labelFactor)*Math.sin(u*e-Math.PI/2)}).text(function(t){return t}).call(r,n.wrapWidth);var g=d3.svg.line.radial().interpolate("linear-closed").radius(function(t){return p(t.value)}).angle(function(t,e){return e*u});n.roundStrokes&&g.interpolate("cardinal-closed");var w=h.selectAll(".radarWrapper").data(e).enter().append("g").attr("class","radarWrapper");w.append("path").attr("class","radarArea").attr("d",function(t,e){return g(t)}).style("fill",function(t,e){return n.color(e)}).style("fill-opacity",n.opacityArea).on("mouseover",function(t,e){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",.1),d3.select(this).transition().duration(200).style("fill-opacity",.7)}).on("mouseout",function(){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",n.opacityArea)}),w.append("path").attr("class","radarStroke").attr("d",function(t,e){return g(t)}).style("stroke-width",n.strokeWidth+"px").style("stroke",function(t,e){return n.color(e)}).style("fill","none").style("filter","url(#glow)"),w.selectAll(".radarCircle").data(function(t,e){return t}).enter().append("circle").attr("class","radarCircle").attr("r",n.dotRadius).attr("cx",function(t,e){return p(t.value)*Math.cos(u*e-Math.PI/2)}).attr("cy",function(t,e){return p(t.value)*Math.sin(u*e-Math.PI/2)}).style("fill",function(t,e,a){return n.color(a)}).style("fill-opacity",.8);var M=h.selectAll(".radarCircleWrapper").data(e).enter().append("g").attr("class","radarCircleWrapper");M.selectAll(".radarInvisibleCircle").data(function(t,e){return t}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",1.5*n.dotRadius).attr("cx",function(t,e){return p(t.value)*Math.cos(u*e-Math.PI/2)}).attr("cy",function(t,e){return p(t.value)*Math.sin(u*e-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseover",function(t,e){newX=parseFloat(d3.select(this).attr("cx"))-10,newY=parseFloat(d3.select(this).attr("cy"))-10,C.attr("x",newX).attr("y",newY).text(c(t.value)).transition().duration(200).style("opacity",1)}).on("mouseout",function(){C.transition().duration(200).style("opacity",0)});var C=h.append("text").attr("class","tooltip").style("opacity",0)}function checkStatus(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function parseJSON(t){return t.json()}function showProfile(t){var e=document.querySelector("."+t);e.classList.remove("hidden")}function drawChart(t){var e={top:100,right:100,bottom:100,left:100},a=Math.min(600,window.innerWidth-10)-e.left-e.right,r=Math.min(a,window.innerHeight-e.top-e.bottom-20),n=d3.scale.ordinal().range(["#e53935"]),l={w:a,h:r,margin:e,maxValue:.5,levels:5,roundStrokes:!0,color:n};RadarChart(".radarChart",t,l)}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("screen_name_form"),e=document.querySelector(".screen_name"),a=document.querySelector(".logo"),r=document.querySelector(".load"),n=document.querySelector(".error");t.addEventListener("submit",function(l){l.preventDefault(),e.value&&(t.classList.add("hidden"),a.classList.add("hidden"),r.classList.remove("hidden"),fetch("http://188.166.145.237/v1/user/"+e.value).then(checkStatus).then(parseJSON).then(function(t){r.classList.add("hidden"),a.classList.remove("hidden");var e=[[{axis:"Bot",value:t.bot/100},{axis:"Drama Queen",value:t.drama_queen/100},{axis:"Stalker",value:t.stalker/100},{axis:"Hater",value:t.hater/100},{axis:"Spammer",value:t.spammer/100}]];showProfile(t["final"]),drawChart(e)})["catch"](function(t){console.log("request failed",t),r.classList.add("hidden"),a.classList.remove("hidden"),n.classList.remove("hidden")}))})});